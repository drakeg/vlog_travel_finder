{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block content %}
  <div class="mb-4">
    <div class="card shadow-sm hero-card" data-aos="fade-up">
      <div class="card-body p-4 p-lg-5">
        <div class="row g-4 align-items-center">
          <div class="col-12 {% if hero_image_url or featured_youtube_url %}col-lg-7{% endif %}">
            <h1 class="display-6 fw-bold mb-2">{{ site_name }}</h1>
            <div class="lead hero-lead mb-3">
              Travel inspiration, place guides, and behind-the-scenes from our trips.
            </div>
            <div class="d-flex flex-column flex-sm-row gap-2">
              <a class="btn btn-primary" href="{{ url_for('public.places') }}">
                <i class="fa-solid fa-map-location-dot me-1"></i>Browse places
              </a>
              <a class="btn btn-outline-secondary" href="{{ url_for('public.blog_index') }}">
                <i class="fa-solid fa-newspaper me-1"></i>Read the blog
              </a>
              <a class="btn btn-outline-secondary" href="{{ url_for('public.contact') }}">
                <i class="fa-solid fa-envelope me-1"></i>Contact
              </a>
            </div>
          </div>
          {% if hero_image_url %}
            <div class="col-12 col-lg-5">
              <div class="hero-image-wrap rounded overflow-hidden">
                <img class="hero-image" src="{{ hero_image_url }}" alt="{{ hero_image_alt or (site_name ~ ' hero image') }}" loading="lazy" />
              </div>
            </div>
          {% endif %}
          {% if featured_youtube_url %}
            <div class="col-12 col-lg-5">
              <div class="ratio ratio-16x9 rounded overflow-hidden">
                <iframe
                  src="{{ featured_youtube_url }}"
                  title="Featured video"
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                  allowfullscreen
                ></iframe>
              </div>
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>

  <div class="row g-4">
    <div class="col-12 {% if latest_video %}col-lg-8{% endif %}">
      <div class="card shadow-sm" data-aos="fade-up" data-aos-delay="50">
        <div class="card-body p-4">
          <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2 mb-2">
            <h2 class="h5 mb-0">Latest posts</h2>
            <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('public.blog_index') }}">
              View all
              <i class="fa-solid fa-arrow-right ms-1"></i>
            </a>
          </div>

          {% if posts %}
            <div class="list-group list-group-flush">
              {% for p in posts %}
                <a class="list-group-item list-group-item-action" href="{{ url_for('public.blog_post', slug=p.slug) }}">
                  <div class="fw-semibold">{{ p.title }}</div>
                  <div class="text-muted small">Read more</div>
                </a>
              {% endfor %}
            </div>
          {% else %}
            <div class="text-muted">No posts yet.</div>
          {% endif %}
        </div>
      </div>
    </div>

    {% if latest_video %}
      <div class="col-12 col-lg-4">
        <div class="card shadow-sm" data-aos="fade-up" data-aos-delay="75">
          <div class="card-body p-4">
            <div class="d-flex align-items-center justify-content-between gap-2 mb-2">
              <h2 class="h6 mb-0">Latest video</h2>
              <a class="btn btn-sm btn-outline-secondary" href="{{ latest_video.url }}" target="_blank" rel="noopener noreferrer">
                YouTube
                <i class="fa-solid fa-arrow-right ms-1"></i>
              </a>
            </div>

            <div class="ratio ratio-16x9 rounded overflow-hidden mb-2">
              <iframe
                src="{{ latest_video.embed_url }}"
                title="{{ latest_video.title }}"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen
              ></iframe>
            </div>

            <div class="fw-semibold">{{ latest_video.title }}</div>
            <div class="text-muted small">Watch right here, or open in YouTube.</div>
          </div>
        </div>
      </div>
    {% endif %}
  </div>
{% endblock %}
